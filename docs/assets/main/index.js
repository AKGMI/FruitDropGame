System.register("chunks:///_virtual/AcceleratedFallStrategy.ts",["cc","./GameConstants.ts"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.GameConstants}],execute:function(){e._RF.push({},"f3c82PjxiJKmJpX11spWDRP","AcceleratedFallStrategy",void 0);t("AcceleratedFallStrategy",function(){function t(){}return t.prototype.applyStrategy=function(t,e,c,n){if(!n.has("initialVelocity")){n.set("initialVelocity",t.y);var i=a.ACCELERATED_ACCELERATION*(.5+1*Math.random());n.set("acceleration",i);var r=a.ACCELERATED_MAX_VELOCITY*(.75+.5*Math.random());n.set("maxVelocity",r)}var o=n.get("acceleration"),l=n.get("maxVelocity");t.y+=o*c,t.y<l&&(t.y=l)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(e){var t,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){n=e.BaseComponent}],execute:function(){i._RF.push({},"3fc61Mv3xFMMLqqKnVUd/K/","AnimationComponent",void 0);e("AnimationType",function(e){return e.SCALE_PULSE="scale_pulse",e.FADE_IN="fade_in",e.FADE_OUT="fade_out",e.BOUNCE="bounce",e.ROTATE="rotate",e.SLIDE_IN="slide_in",e.SLIDE_OUT="slide_out",e.SHAKE="shake",e.COLLECT_EFFECT="collect_effect",e.DAMAGE_EFFECT="damage_effect",e}({})),e("AnimationComponent",function(e){function i(t,i,n){var s;return void 0===i&&(i=1),void 0===n&&(n=1),(s=e.call(this)||this).type=void 0,s.isPlaying=!1,s.isPaused=!1,s.speed=1,s.duration=1,s.elapsed=0,s.loop=!1,s.autoStart=!0,s.parameters=new Map,s.type=t,s.duration=i,s.speed=n,s}t(i,e);var n=i.prototype;return n.play=function(){this.isPlaying=!0,this.isPaused=!1,this.elapsed=0},n.stop=function(){this.isPlaying=!1,this.isPaused=!1,this.elapsed=0},n.pause=function(){this.isPaused=!0},n.resume=function(){this.isPaused=!1},n.isComplete=function(){return this.elapsed>=this.duration},n.getProgress=function(){return Math.min(this.elapsed/this.duration,1)},n.setParameter=function(e,t){this.parameters.set(e,t)},n.getParameter=function(e){return this.parameters.get(e)},n.hasParameter=function(e){return this.parameters.has(e)},n.reset=function(){this.elapsed=0,this.isPlaying=!1,this.isPaused=!1},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./AnimationComponent.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var e,n,a,i,o,s,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.BaseSystem},function(t){i=t.AnimationType,o=t.AnimationComponent},function(t){s=t.EventBus},function(t){r=t.GameEvents}],execute:function(){n._RF.push({},"92cdexCA5lNI4mF2tTsfKLt","AnimationSystem",void 0);t("AnimationSystem",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var a=n.prototype;return a.onLoad=function(){s.on(r.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),s.on(r.DAMAGE_TAKEN,this.onDamageTaken.bind(this))},a.onDestroy=function(){s.off(r.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),s.off(r.DAMAGE_TAKEN,this.onDamageTaken.bind(this))},a.update=function(t){var e=this;this.world.getEntitiesWith(["AnimationComponent"]).forEach((function(n){var a=e.world.getComponent(n,"AnimationComponent");a&&a.isPlaying&&!a.isPaused&&(a.elapsed+=t*a.speed,a.isComplete()?a.loop?(a.reset(),a.play()):(a.stop(),e.onAnimationComplete(n,a)):e.updateAnimation(n,a))}))},a.updateAnimation=function(t,e){var n=e.getProgress();switch(e.type){case i.SCALE_PULSE:this.updateScalePulseAnimation(t,e,n);break;case i.FADE_IN:this.updateFadeInAnimation(t,e,n);break;case i.FADE_OUT:this.updateFadeOutAnimation(t,e,n);break;case i.BOUNCE:this.updateBounceAnimation(t,e,n);break;case i.ROTATE:this.updateRotateAnimation(t,e,n);break;case i.SHAKE:this.updateShakeAnimation(t,e,n);break;case i.COLLECT_EFFECT:this.updateCollectEffectAnimation(t,e,n);break;case i.DAMAGE_EFFECT:this.updateDamageEffectAnimation(t,e,n)}},a.updateScalePulseAnimation=function(t,e,n){var a=e.getParameter("baseScale")||1,i=e.getParameter("amplitude")||.2,o=e.getParameter("frequency")||2,m=a+Math.sin(n*Math.PI*o)*i;s.emit(r.ANIMATION_CHANGED,{entityId:t,scaleX:m,scaleY:m})},a.updateFadeInAnimation=function(t,e,n){s.emit(r.ANIMATION_CHANGED,{entityId:t,alpha:n})},a.updateFadeOutAnimation=function(t,e,n){s.emit(r.ANIMATION_CHANGED,{entityId:t,alpha:1-n})},a.updateBounceAnimation=function(t,e,n){var a=e.getParameter("baseY")||0,i=e.getParameter("height")||50,o=4*n*Math.PI,s=Math.abs(Math.sin(o))*i*(1-n),r=this.world.getComponent(t,"PositionComponent");r&&(r.y=a+s)},a.updateRotateAnimation=function(t,e,n){var a=e.getParameter("startRotation")||0,i=a+((e.getParameter("endRotation")||360)-a)*n;s.emit(r.ANIMATION_CHANGED,{entityId:t,rotation:i})},a.updateShakeAnimation=function(t,e,n){var a=e.getParameter("baseX")||0,i=e.getParameter("baseY")||0,o=e.getParameter("intensity")||5,s=(Math.random()-.5)*o*(1-n),r=(Math.random()-.5)*o*(1-n),m=this.world.getComponent(t,"PositionComponent");m&&(m.x=a+s,m.y=i+r)},a.updateCollectEffectAnimation=function(t,e,n){var a=1+.5*n,i=1-n;s.emit(r.ANIMATION_CHANGED,{entityId:t,scaleX:a,scaleY:a,alpha:i})},a.updateDamageEffectAnimation=function(t,e,n){var a=Math.sin(n*Math.PI*8)>0?.5:1;s.emit(r.ANIMATION_CHANGED,{entityId:t,colorR:1,colorG:a,colorB:a})},a.onAnimationComplete=function(t,e){this.world.removeComponent(t,"AnimationComponent"),e.type===i.COLLECT_EFFECT&&this.world.destroyEntity(t)},a.onFruitCollected=function(t){t.entityId&&this.createCollectAnimation(t.entityId)},a.onDamageTaken=function(t){t.entityId&&this.createDamageAnimation(t.entityId)},a.createCollectAnimation=function(t){var e=new o(i.COLLECT_EFFECT,.5);e.play(),this.world.addComponent(t,e)},a.createDamageAnimation=function(t){var e=new o(i.DAMAGE_EFFECT,.8);e.play(),this.world.addComponent(t,e)},a.createShakeAnimation=function(t,e,n){void 0===e&&(e=5),void 0===n&&(n=.3);var a=new o(i.SHAKE,n);a.setParameter("intensity",e);var s=this.world.getComponent(t,"PositionComponent");s&&(a.setParameter("baseX",s.x),a.setParameter("baseY",s.y)),a.play(),this.world.addComponent(t,a)},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(e){var t,n,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){u=e.BaseComponent}],execute:function(){n._RF.push({},"be973D01aVBm4pbNvKM/3P+","AudioComponent",void 0);var o=e("SoundType",function(e){return e.FRUIT_COLLECT="fruit_collect",e.FRUIT_MISS="fruit_miss",e.DAMAGE_TAKEN="damage_taken",e.COMBO_START="combo_start",e.COMBO_UPDATE="combo_update",e.COMBO_END="combo_end",e.BUTTON_CLICK="button_click",e.GAME_START="game_start",e.GAME_OVER="game_over",e.BACKGROUND_MUSIC="background_music",e}({}));e("AudioComponent",function(e){function n(t,n,u){var o;return void 0===n&&(n=""),void 0===u&&(u=1),(o=e.call(this)||this).soundType=void 0,o.volume=1,o.isLooped=!1,o.isPlaying=!1,o.isPaused=!1,o.soundPath="",o.delay=0,o.fadeIn=0,o.fadeOut=0,o.soundType=t,o.soundPath=n,o.volume=u,o}t(n,e);var u=n.prototype;return u.play=function(){this.isPlaying=!0,this.isPaused=!1},u.stop=function(){this.isPlaying=!1,this.isPaused=!1},u.pause=function(){this.isPaused=!0},u.resume=function(){this.isPaused=!1},u.setVolume=function(e){this.volume=Math.max(0,Math.min(1,e))},n.getDefaultConfig=function(e){switch(e){case o.FRUIT_COLLECT:return{volume:.7};case o.FRUIT_MISS:return{volume:.5,fadeOut:.2};case o.DAMAGE_TAKEN:return{volume:.8,fadeIn:.1};case o.COMBO_START:return{volume:.6,fadeIn:.3};case o.COMBO_UPDATE:return{volume:.5,delay:.1};case o.COMBO_END:return{volume:.7,fadeOut:.5};case o.BUTTON_CLICK:return{volume:.6};case o.GAME_START:return{volume:.8,fadeIn:.5};case o.GAME_OVER:return{volume:.9,fadeIn:.3};case o.BACKGROUND_MUSIC:return{volume:.3,isLooped:!0,fadeIn:2};default:return{volume:1}}},n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts","./AudioComponent.ts"],(function(o){var i,u,e,t,s,n,d,r,a,c,l,S,h,f,p,m;return{setters:[function(o){i=o.applyDecoratedDescriptor,u=o.inheritsLoose,e=o.initializerDefineProperty,t=o.assertThisInitialized,s=o.createForOfIteratorHelperLoose},function(o){n=o.cclegacy,d=o._decorator,r=o.AudioSource,a=o.Node,c=o.tween,l=o.Component,S=o.resources,h=o.AudioClip},function(o){f=o.EventBus},function(o){p=o.GameEvents},function(o){m=o.SoundType}],execute:function(){var A,v,y,g,O,P,_,b,C;n._RF.push({},"625a7rNarZJ/rVxStDIq99b","AudioController",void 0);var M=d.ccclass,x=d.property;o("AudioController",(A=M("AudioController"),v=x({type:[r]}),y=x(r),g=x({type:Number,min:1,max:20}),A((_=i((P=function(o){function i(){for(var i,u,s=arguments.length,n=new Array(s),d=0;d<s;d++)n[d]=arguments[d];return u=o.call.apply(o,[this].concat(n))||this,e(u,"sfxAudioSourcePool",_,t(u)),e(u,"musicAudioSource",b,t(u)),e(u,"maxSfxSources",C,t(u)),u.soundClips=new Map,u.masterVolume=1,u.sfxVolume=.7,u.musicVolume=.4,u.pendingSounds=[],u.pendingMusic=[],u.isLoaded=!1,u.activeFadeOuts=new Set,u.busyAudioSources=new Set,u.soundPaths=((i={})[m.FRUIT_COLLECT]="Audio/SFX/fruit_collect",i[m.FRUIT_MISS]="Audio/SFX/fruit_miss",i[m.DAMAGE_TAKEN]="Audio/SFX/damage_taken",i[m.COMBO_START]="Audio/SFX/combo_start",i[m.COMBO_UPDATE]="Audio/SFX/combo_update",i[m.COMBO_END]="Audio/SFX/combo_end",i[m.BUTTON_CLICK]="Audio/SFX/button_click",i[m.GAME_START]="Audio/SFX/game_start",i[m.GAME_OVER]="Audio/SFX/game_over",i[m.BACKGROUND_MUSIC]="Audio/Music/background_music",i),u}u(i,o);var n=i.prototype;return n.onLoad=function(){f.on(p.SOUND_PLAY,this.onSoundPlay.bind(this)),f.on(p.SOUND_STOP,this.onSoundStop.bind(this)),f.on(p.SOUND_VOLUME_CHANGED,this.onVolumeChanged.bind(this)),f.on(p.MUSIC_PLAY,this.onMusicPlay.bind(this)),f.on(p.MUSIC_STOP,this.onMusicStop.bind(this)),this.initializeAudioSourcePool(),this.loadSounds()},n.onDestroy=function(){f.off(p.SOUND_PLAY,this.onSoundPlay.bind(this)),f.off(p.SOUND_STOP,this.onSoundStop.bind(this)),f.off(p.SOUND_VOLUME_CHANGED,this.onVolumeChanged.bind(this)),f.off(p.MUSIC_PLAY,this.onMusicPlay.bind(this)),f.off(p.MUSIC_STOP,this.onMusicStop.bind(this))},n.initializeAudioSourcePool=function(){if(this.sfxAudioSourcePool.length>0)console.log("🎵 Используется пул из "+this.sfxAudioSourcePool.length+" AudioSource-ов");else{console.log("🎵 Создание пула из "+this.maxSfxSources+" AudioSource-ов");for(var o=0;o<this.maxSfxSources;o++){var i=new a("SFX_AudioSource_"+o);i.setParent(this.node);var u=i.addComponent(r);this.sfxAudioSourcePool.push(u)}}},n.getAvailableAudioSource=function(){for(var o,i=s(this.sfxAudioSourcePool);!(o=i()).done;){var u=o.value;if(!this.busyAudioSources.has(u)&&!u.playing)return u}for(var e,t=s(this.sfxAudioSourcePool);!(e=t()).done;){var n=e.value;if(!this.activeFadeOuts.has(n))return console.warn("🎵 Все AudioSource заняты, переиспользуем самый старый"),n}return null},n.markAudioSourceBusy=function(o){this.busyAudioSources.add(o)},n.releaseAudioSource=function(o){this.busyAudioSources.delete(o),this.activeFadeOuts.delete(o)},n.loadSounds=function(){var o=this,i=0,u=Object.keys(this.soundPaths).length,e=function(e){var t=o.soundPaths[e];S.load(t,h,(function(t,s){i++,t?console.warn("Не удалось загрузить звук "+e+": "+t.message):o.soundClips.set(e,s),i===u&&(console.log("🎉 Загружено ("+o.soundClips.size+"/"+u+" звуков!"),o.isLoaded=!0,o.playPendingSounds())}))};for(var t in this.soundPaths)e(t)},n.playPendingSounds=function(){var o=this;this.pendingSounds.forEach((function(i){o.playSound(i.soundType,i.volume,i.delay,i.fadeIn,i.fadeOut)})),this.pendingSounds=[],this.pendingMusic.forEach((function(i){o.playMusic(i.soundType,i.delay,i.fadeIn,i.fadeOut)})),this.pendingMusic=[]},n.onSoundPlay=function(o){var i=o.soundType,u=o.volume||1,e=o.delay||0,t=o.fadeIn||0,s=o.fadeOut||0;this.playSound(i,u,e,t,s)},n.onSoundStop=function(o){var i=o.soundType,u=o.fadeOut||0;this.stopSound(i,u)},n.onVolumeChanged=function(o){void 0!==o.masterVolume&&(this.masterVolume=o.masterVolume),void 0!==o.sfxVolume&&(this.sfxVolume=o.sfxVolume),void 0!==o.musicVolume&&(this.musicVolume=o.musicVolume),this.updateVolumes()},n.onMusicPlay=function(o){var i=o.soundType,u=o.delay||0,e=o.fadeIn||0,t=o.fadeOut||0;this.playMusic(i,u,e,t)},n.onMusicStop=function(o){var i=o.fadeOut||0;this.musicAudioSource&&this.musicAudioSource.playing&&(i>0?this.applyFadeOut(this.musicAudioSource,i):(this.musicAudioSource.stop(),this.activeFadeOuts.delete(this.musicAudioSource)))},n.playSound=function(o,i,u,e,t){var s=this;void 0===i&&(i=1),void 0===u&&(u=0),void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getAvailableAudioSource();if(n){var d=this.soundClips.get(o);if(!d)return this.isLoaded?void 0:void this.pendingSounds.push({soundType:o,volume:i,delay:u,fadeIn:e,fadeOut:t});var r=function(){s.markAudioSourceBusy(n),n.clip=d,n.loop=!1;var o=i*s.sfxVolume*s.masterVolume;e>0?(n.volume=0,n.play(),c(n).to(e,{volume:o}).start()):(n.volume=o,n.play());var u=d.getDuration();if(s.scheduleOnce((function(){s.releaseAudioSource(n)}),u),t>0){var r=Math.max(0,u-t);s.scheduleOnce((function(){s.applyFadeOut(n,t)}),r)}};u>0?this.scheduleOnce(r,u):r()}else console.warn("🎵 Нет доступных AudioSource для воспроизведения звука")},n.playMusic=function(o,i,u,e){var t=this;if(void 0===i&&(i=0),void 0===u&&(u=0),void 0===e&&(e=0),this.musicAudioSource){var s=this.soundClips.get(o);if(!s)return this.isLoaded?void 0:void this.pendingMusic.push({soundType:o,delay:i,fadeIn:u,fadeOut:e});var n=function(){t.musicAudioSource.playing&&t.musicAudioSource.stop(),t.musicAudioSource.clip=s,t.musicAudioSource.loop=!0;var o=t.musicVolume*t.masterVolume;u>0?(t.musicAudioSource.volume=0,t.musicAudioSource.play(),c(t.musicAudioSource).to(u,{volume:o}).start()):(t.musicAudioSource.volume=o,t.musicAudioSource.play())};i>0?this.scheduleOnce(n,i):n()}else console.warn("Music AudioSource не назначен")},n.stopSound=function(o,i){void 0===i&&(i=0);for(var u,e=s(this.sfxAudioSourcePool);!(u=e()).done;){var t=u.value;t.playing&&(i>0?this.applyFadeOut(t,i):(t.stop(),this.releaseAudioSource(t)))}},n.updateVolumes=function(){for(var o,i=s(this.sfxAudioSourcePool);!(o=i()).done;){var u=o.value;u.playing&&(u.volume=this.sfxVolume*this.masterVolume)}this.musicAudioSource&&(this.musicAudioSource.volume=this.musicVolume*this.masterVolume)},n.getSound=function(o){return this.soundClips.get(o)||null},n.isSoundLoaded=function(o){return this.soundClips.has(o)},n.applyFadeOut=function(o,i){var u=this;o&&o.playing&&(this.activeFadeOuts.has(o)||(this.activeFadeOuts.add(o),c(o).to(i,{volume:0}).call((function(){o.stop(),u.releaseAudioSource(o)})).start()))},n.stopMusicWithFadeOut=function(o){void 0===o&&(o=1),this.musicAudioSource&&this.musicAudioSource.playing&&this.applyFadeOut(this.musicAudioSource,o)},n.stopSoundWithFadeOut=function(o,i){void 0===i&&(i=.5),this.stopSound(o,i)},n.stopAllSounds=function(){for(var o,i=s(this.sfxAudioSourcePool);!(o=i()).done;){var u=o.value;u.playing&&(u.stop(),this.releaseAudioSource(u))}},n.stopAllSoundsWithFadeOut=function(o){void 0===o&&(o=.5);for(var i,u=s(this.sfxAudioSourcePool);!(i=u()).done;){var e=i.value;e.playing&&this.applyFadeOut(e,o)}},n.getActiveAudioSourceCount=function(){return this.busyAudioSources.size},n.getPlayingAudioSourceCount=function(){return this.sfxAudioSourcePool.filter((function(o){return o.playing})).length},i}(l)).prototype,"sfxAudioSourcePool",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=i(P.prototype,"musicAudioSource",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(P.prototype,"maxSfxSources",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),O=P))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./AudioComponent.ts","./EventBus.ts","./GameEvents.ts","./GameConstants.ts"],(function(t){var o,n,e,u,i,s,d,a;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BaseSystem},function(t){u=t.AudioComponent,i=t.SoundType},function(t){s=t.EventBus},function(t){d=t.GameEvents},function(t){a=t.GameConstants}],execute:function(){n._RF.push({},"2ea6dm/SA9MN76z9avIJiAr","AudioSystem",void 0);t("AudioSystem",function(t){function n(){for(var o,n=arguments.length,e=new Array(n),u=0;u<n;u++)e[u]=arguments[u];return(o=t.call.apply(t,[this].concat(e))||this).masterVolume=a.SOUND_VOLUME_MASTER,o.sfxVolume=a.SOUND_VOLUME_SFX,o.musicVolume=a.SOUND_VOLUME_MUSIC,o.soundQueue=[],o}o(n,t);var e=n.prototype;return e.onLoad=function(){s.on(d.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),s.on(d.FRUIT_MISSED,this.onFruitMissed.bind(this)),s.on(d.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),s.on(d.COMBO_STARTED,this.onComboStarted.bind(this)),s.on(d.COMBO_UPDATED,this.onComboUpdated.bind(this)),s.on(d.COMBO_ENDED,this.onComboEnded.bind(this)),s.on(d.GAME_STARTED,this.onGameStarted.bind(this)),s.on(d.GAME_OVER,this.onGameOver.bind(this)),s.on(d.SOUND_VOLUME_CHANGED,this.onVolumeChanged.bind(this))},e.onDestroy=function(){s.off(d.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),s.off(d.FRUIT_MISSED,this.onFruitMissed.bind(this)),s.off(d.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),s.off(d.COMBO_STARTED,this.onComboStarted.bind(this)),s.off(d.COMBO_UPDATED,this.onComboUpdated.bind(this)),s.off(d.COMBO_ENDED,this.onComboEnded.bind(this)),s.off(d.GAME_STARTED,this.onGameStarted.bind(this)),s.off(d.GAME_OVER,this.onGameOver.bind(this)),s.off(d.SOUND_VOLUME_CHANGED,this.onVolumeChanged.bind(this))},e.update=function(t){this.processSoundQueue()},e.processSoundQueue=function(){for(;this.soundQueue.length>0;){var t=this.soundQueue.shift();t&&this.playSound(t)}},e.playSound=function(t){var o=this.world.createEntity(),n=new u(t),e=u.getDefaultConfig(t);Object.assign(n,e);var s=t===i.BACKGROUND_MUSIC?this.musicVolume:this.sfxVolume;n.volume*=s*this.masterVolume,n.play(),this.world.addComponent(o,n),this.actuallyPlaySound(n),this.world.destroyEntity(o)},e.actuallyPlaySound=function(t){t.soundType===i.BACKGROUND_MUSIC?s.emit(d.MUSIC_PLAY,{soundType:t.soundType,volume:t.volume,loop:t.isLooped,delay:t.delay,fadeIn:t.fadeIn,fadeOut:t.fadeOut}):s.emit(d.SOUND_PLAY,{soundType:t.soundType,volume:t.volume,delay:t.delay,fadeIn:t.fadeIn,fadeOut:t.fadeOut})},e.onFruitCollected=function(t){this.queueSound(i.FRUIT_COLLECT)},e.onFruitMissed=function(t){this.queueSound(i.FRUIT_MISS)},e.onDamageTaken=function(t){this.queueSound(i.DAMAGE_TAKEN)},e.onComboStarted=function(t){this.queueSound(i.COMBO_START)},e.onComboUpdated=function(t){this.queueSound(i.COMBO_UPDATE)},e.onComboEnded=function(t){this.queueSound(i.COMBO_END)},e.onGameStarted=function(t){this.queueSound(i.GAME_START),this.queueSound(i.BACKGROUND_MUSIC)},e.onGameOver=function(t){this.queueSound(i.GAME_OVER)},e.onVolumeChanged=function(t){void 0!==t.masterVolume&&(this.masterVolume=t.masterVolume),void 0!==t.sfxVolume&&(this.sfxVolume=t.sfxVolume),void 0!==t.musicVolume&&(this.musicVolume=t.musicVolume)},e.queueSound=function(t){this.soundQueue.push(t)},e.stopSound=function(t,o){void 0===o&&(o=0),t===i.BACKGROUND_MUSIC?s.emit(d.MUSIC_STOP,{soundType:t,fadeOut:o}):s.emit(d.SOUND_STOP,{soundType:t,fadeOut:o})},e.stopMusic=function(t){void 0===t&&(t=0),this.stopSound(i.BACKGROUND_MUSIC,t)},e.stopAllSounds=function(){this.soundQueue=[],s.emit(d.MUSIC_STOP,{fadeOut:0}),s.emit(d.SOUND_STOP,{fadeOut:0})},e.stopMusicWithFadeOut=function(t){void 0===t&&(t=1),this.stopMusic(t)},e.playButtonClick=function(){this.queueSound(i.BUTTON_CLICK)},e.setMasterVolume=function(t){this.masterVolume=Math.max(0,Math.min(1,t))},e.setSfxVolume=function(t){this.sfxVolume=Math.max(0,Math.min(1,t))},e.setMusicVolume=function(t){this.musicVolume=Math.max(0,Math.min(1,t))},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"c3d55kpYyhPLod/OGsTIb0d","BaseComponent",void 0);t("BaseComponent",(function(t){this.entityId=void 0,this.entityId=t||0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ServiceLocator.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy},function(e){n=e.ServiceLocator}],execute:function(){r._RF.push({},"50665rRDSpHZ7vfxcEjayrX","BaseSystem",void 0);e("BaseSystem",function(){function e(){this.enabled=!0}var r=e.prototype;return r.getWorld=function(){var e=n.get("ECSWorld");if(!e)throw new Error("ECSWorld не найден в ServiceLocator.");return e},r.onLoad=function(){},r.onDestroy=function(){},r.setEnabled=function(e){this.enabled=e},t(e,[{key:"world",get:function(){return this.getWorld()}}]),e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BasketComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameConstants.ts"],(function(t){var e,n,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.BaseComponent},function(t){s=t.GameConstants}],execute:function(){n._RF.push({},"877eb2dNNlI07Kty0318v6Q","BasketComponent",void 0);t("BasketComponent",function(t){function n(e,n){var o;return void 0===e&&(e=s.BASKET_SPEED),void 0===n&&(n=s.BASKET_SIZE.width),(o=t.call(this)||this).speed=void 0,o.width=void 0,o.speed=e,o.width=n,o}e(n,t);var o=n.prototype;return o.setSpeed=function(t){this.speed=t},o.setWidth=function(t){this.width=t},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/BasketViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts"],(function(t){var o,n,i,e,s,a,r,c,d;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.UIOpacity,s=t.Sprite,a=t.Color,r=t.Component},function(t){c=t.EventBus},function(t){d=t.GameEvents}],execute:function(){var h;n._RF.push({},"e0fe13FzvpKmIunRohUFbcJ","BasketViewController",void 0);var l=i.ccclass;i.property,t("BasketViewController",l("BasketViewController")(h=function(t){function n(){for(var o,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(o=t.call.apply(t,[this].concat(i))||this).entityId=-1,o}o(n,t);var i=n.prototype;return i.onLoad=function(){c.on(d.BASKET_CREATED,this.onBasketCreated.bind(this)),c.on(d.BASKET_POSITION_CHANGED,this.onPositionChanged.bind(this)),c.on(d.ANIMATION_CHANGED,this.onAnimationChanged.bind(this));var t=this.node.getComponent(e);t||(t=this.node.addComponent(e))},i.onDestroy=function(){c.off(d.BASKET_CREATED,this.onBasketCreated.bind(this)),c.off(d.BASKET_POSITION_CHANGED,this.onPositionChanged.bind(this)),c.off(d.ANIMATION_CHANGED,this.onAnimationChanged.bind(this))},i.onBasketCreated=function(t){this.entityId=t.entityId,this.node.setPosition(t.x,t.y)},i.onPositionChanged=function(t){t.entityId===this.entityId&&this.node.setPosition(t.x,t.y)},i.onAnimationChanged=function(t){if(t.entityId===this.entityId){if(void 0!==t.scaleX&&void 0!==t.scaleY&&this.node.setScale(t.scaleX,t.scaleY),void 0!==t.alpha){var o=this.node.getComponent(e);o&&(o.opacity=Math.floor(255*t.alpha))}if(void 0!==t.colorR&&void 0!==t.colorG&&void 0!==t.colorB){var n=this.node.getComponent(s);if(n){var i=new a(Math.floor(255*t.colorR),Math.floor(255*t.colorG),Math.floor(255*t.colorB),n.color.a);n.color=i}}}},i.setEntityId=function(t){this.entityId=t},n}(r))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/BoundarySystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenAwareSystem.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var n,o,e,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.ScreenAwareSystem},function(t){i=t.EventBus},function(t){s=t.GameEvents}],execute:function(){o._RF.push({},"d88c1UURNVKc7pp1uvXS9Hx","BoundarySystem",void 0);t("BoundarySystem",function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.update=function(t){this.checkBasketBounds(),this.checkFruitBounds()},e.checkBasketBounds=function(){var t=this;this.world.getEntitiesWith(["BasketComponent","PositionComponent","BoundsComponent"]).forEach((function(n){var o=t.world.getComponent(n,"PositionComponent"),e=t.world.getComponent(n,"BoundsComponent");if(o&&e){var i=e.width/2;o.x-i<0?o.x=i:o.x+i>t.screenWidth&&(o.x=t.screenWidth-i)}}))},e.checkFruitBounds=function(){var t=this,n=this.world.getEntitiesWith(["FruitComponent","PositionComponent","BoundsComponent"]),o=[];n.forEach((function(n){var e=t.world.getComponent(n,"PositionComponent"),r=t.world.getComponent(n,"BoundsComponent"),u=t.world.getComponent(n,"FruitComponent");e&&r&&e.y+r.height/2<-r.height&&(o.push(n),i.emit(s.FRUIT_MISSED,{entityId:n,score:u.score,position:{x:e.x,y:e.y}}))})),o.forEach((function(n){t.world.hasEntity(n)&&(i.emit(s.ENTITY_DESTROYED,{entityId:n}),t.world.destroyEntity(n))}))},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/BoundsComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.BaseComponent}],execute:function(){o._RF.push({},"7126fCTjutEo63B0tcLK7R/","BoundsComponent",void 0);t("BoundsComponent",function(t){function o(n,o){var e;return void 0===n&&(n=0),void 0===o&&(o=0),(e=t.call(this)||this).width=0,e.height=0,e.width=n,e.height=o,e}n(o,t);var e=o.prototype;return e.setBounds=function(t,n){this.width=t,this.height=n},e.getArea=function(){return this.width*this.height},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/CollectibleComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(e){var t,o,n;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){n=e.BaseComponent}],execute:function(){o._RF.push({},"4c17bNLtSlBurzfUEXFZK0/","CollectibleComponent",void 0);e("CollectibleComponent",function(e){function o(){var t;return(t=e.call(this)||this).collected=!1,t.collectTime=0,t}t(o,e);var n=o.prototype;return n.markCollected=function(){this.collected=!0,this.collectTime=Date.now()},n.isCollected=function(){return this.collected},o}(n));o._RF.pop()}}}));

System.register("chunks:///_virtual/CollectibleFactory.ts",["cc","./PositionComponent.ts","./VelocityComponent.ts","./BoundsComponent.ts","./RotationComponent.ts","./FruitComponent.ts","./CollectibleComponent.ts","./LifetimeComponent.ts","./FallStrategyComponent.ts","./GameConstants.ts"],(function(n){var t,o,e,i,a,c,C,m,p,r,u,l;return{setters:[function(n){t=n.cclegacy},function(n){o=n.PositionComponent},function(n){e=n.VelocityComponent},function(n){i=n.BoundsComponent},function(n){a=n.RotationComponent},function(n){c=n.FruitType,C=n.FruitComponent},function(n){m=n.CollectibleComponent},function(n){p=n.LifetimeComponent},function(n){r=n.FallStrategyType,u=n.FallStrategyComponent},function(n){l=n.GameConstants}],execute:function(){t._RF.push({},"7418eI+/U5J+oJPIT09OIpv","CollectibleFactory",void 0);n("CollectibleFactory",function(){function n(){}return n.createFruit=function(n,t,s,d){var F=n.createEntity(),I=l.FRUIT_FALL_SPEED,f=l.FRUIT_SPEED_VARIATION,T=I+2*(Math.random()-.5)*f,R=t===c.MUSHROOM?.5:1,E=l.FRUIT_ROTATION_SPEED_MIN*R,_=l.FRUIT_ROTATION_SPEED_MAX*R,y=Math.random()*(_-E)+E,S=[r.STRAIGHT,r.ZIGZAG,r.ACCELERATED],h=S[Math.floor(Math.random()*S.length)],A=l.FRUIT_SIZE;return n.addComponent(F,new o(s,d)),n.addComponent(F,new e(0,-T)),n.addComponent(F,new i(A.width,A.height)),n.addComponent(F,new a(y)),n.addComponent(F,new C(t)),n.addComponent(F,new m),n.addComponent(F,new p(l.FRUIT_LIFETIME)),n.addComponent(F,new u(h)),F},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/CollisionSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts","./ServiceLocator.ts"],(function(t){var o,n,e,i,s,l;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BaseSystem},function(t){i=t.EventBus},function(t){s=t.GameEvents},function(t){l=t.ServiceLocator}],execute:function(){n._RF.push({},"8f0d8zDhWpFl7Mb+ZsvdJQM","CollisionSystem",void 0);t("CollisionSystem",function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.update=function(t){var o=this,n=this.world.getEntitiesWith(["BasketComponent","PositionComponent","BoundsComponent"]),e=this.world.getEntitiesWith(["FruitComponent","PositionComponent","BoundsComponent","CollectibleComponent"]);n.forEach((function(t){var n=o.world.getComponent(t,"PositionComponent"),i=o.world.getComponent(t,"BoundsComponent");n&&i&&e.forEach((function(e){if(o.world.hasEntity(e)){var s=o.world.getComponent(e,"PositionComponent"),l=o.world.getComponent(e,"BoundsComponent"),r=o.world.getComponent(e,"CollectibleComponent");s&&l&&r&&!r.collected&&o.checkCollision(n,i,s,l)&&o.handleFruitCollision(t,e)}}))}))},e.checkCollision=function(t,o,n,e){var i=t.x-o.width/2,s=t.x+o.width/2,l=t.y-o.height/2,r=t.y+o.height/2,a=n.x-e.width/2,d=n.x+e.width/2,c=n.y-e.height/2,h=n.y+e.height/2;return!(i>d||s<a||l>h||r<c)},e.handleFruitCollision=function(t,o){if(this.world.hasEntity(o)){var n=this.world.getComponent(o,"CollectibleComponent"),e=this.world.getComponent(o,"FruitComponent");n&&e&&!n.collected&&(n.collected=!0,e.isHazard()?this.handleHazardTouch(t,o,e):this.handleFruitCollection(t,o,e))}},e.handleFruitCollection=function(t,o,n){var e=this,l=this.world.getComponent(o,"PositionComponent");i.emit(s.FRUIT_COLLECTED,{basketId:t,entityId:o,fruitType:n.type,score:n.score,position:l?{x:l.x,y:l.y}:{x:0,y:0}}),setTimeout((function(){e.world.hasEntity(o)&&(i.emit(s.ENTITY_DESTROYED,{entityId:o}),e.world.destroyEntity(o))}),400)},e.handleHazardTouch=function(t,o,n){var e=this,r=this.world.getComponent(t,"HealthComponent");if(r){if(r.isInvulnerable())return;var a=l.get("HealthSystem");a&&a.damageEntity&&a.damageEntity(t,n.getDamage()),i.emit(s.HAZARD_COLLISION,{basketId:t,entityId:o,fruitType:n.type,damage:n.getDamage()})}setTimeout((function(){e.world.hasEntity(o)&&(i.emit(s.ENTITY_DESTROYED,{entityId:o}),e.world.destroyEntity(o))}),350)},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/ComboComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameConstants.ts"],(function(t){var e,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.BaseComponent},function(t){s=t.GameConstants}],execute:function(){i._RF.push({},"80576UUVgZFxbFwx42mPhj6","ComboComponent",void 0);t("ComboComponent",function(t){function i(){var e;return(e=t.call(this)||this).streak=0,e.multiplier=1,e.lastCollectTime=0,e.isActive=!1,e.comboLevel=0,e.totalCombos=0,e.maxStreak=0,e}e(i,t);var o=i.prototype;return o.incrementStreak=function(){this.streak++,this.lastCollectTime=Date.now(),this.streak>this.maxStreak&&(this.maxStreak=this.streak),this.streak>=s.COMBO_MIN_STREAK&&!this.isActive&&(this.isActive=!0,this.totalCombos++),this.updateMultiplier()},o.resetCombo=function(){this.streak=0,this.multiplier=s.COMBO_MULTIPLIER_BASE,this.isActive=!1,this.comboLevel=0},o.isTimedOut=function(){return(Date.now()-this.lastCollectTime)/1e3>s.COMBO_TIMEOUT},o.updateMultiplier=function(){this.comboLevel=0;for(var t=0;t<s.COMBO_LEVELS.length;t++)this.streak>=s.COMBO_LEVELS[t]&&(this.comboLevel=t+1);this.multiplier=Math.min(s.COMBO_MULTIPLIER_BASE+this.comboLevel*s.COMBO_MULTIPLIER_INCREMENT,s.COMBO_MULTIPLIER_MAX)},o.getComboLevelText=function(){switch(this.comboLevel){case 0:return"";case 1:return"Хорошо!";case 2:return"Отлично!";case 3:return"Потрясающе!";case 4:return"Невероятно!";case 5:return"ЛЕГЕНДА!";default:return"МАСТЕР!"}},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/ComboSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./ComboComponent.ts","./EventBus.ts","./GameEvents.ts","./GameConstants.ts"],(function(o){var t,e,n,i,m,s,c;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy},function(o){n=o.BaseSystem},function(o){i=o.ComboComponent},function(o){m=o.EventBus},function(o){s=o.GameEvents},function(o){c=o.GameConstants}],execute:function(){e._RF.push({},"86c3avHTvpFuL2aUd9AFBCE","ComboSystem",void 0);o("ComboSystem",function(o){function e(){var t;return(t=o.call(this)||this).comboComponent=void 0,t.lastTimeWarning=0,t.comboComponent=new i,t}t(e,o);var n=e.prototype;return n.onLoad=function(){m.on(s.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),m.on(s.FRUIT_MISSED,this.onFruitMissed.bind(this)),m.on(s.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),m.on(s.GAME_OVER,this.onGameOver.bind(this)),m.on(s.GAME_RESTARTED,this.onGameRestarted.bind(this))},n.onDestroy=function(){m.off(s.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),m.off(s.FRUIT_MISSED,this.onFruitMissed.bind(this)),m.off(s.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),m.off(s.GAME_OVER,this.onGameOver.bind(this)),m.off(s.GAME_RESTARTED,this.onGameRestarted.bind(this))},n.update=function(o){if(this.comboComponent.isActive){var t=this.getRemainingTime();if(t<=1&&t>0){var e=Date.now();e-this.lastTimeWarning>100&&(m.emit(s.COMBO_TIME_WARNING,{timeLeft:t,streak:this.comboComponent.streak,multiplier:this.comboComponent.multiplier,isUrgent:t<=.5}),this.lastTimeWarning=e)}this.comboComponent.isTimedOut()&&this.endCombo()}},n.getRemainingTime=function(){var o=(Date.now()-this.comboComponent.lastCollectTime)/1e3;return Math.max(0,c.COMBO_TIMEOUT-o)},n.onFruitCollected=function(o){if(o.score>0){var t=this.comboComponent.isActive;this.comboComponent.incrementStreak(),!t&&this.comboComponent.isActive&&m.emit(s.COMBO_STARTED,{streak:this.comboComponent.streak,multiplier:this.comboComponent.multiplier,level:this.comboComponent.comboLevel}),this.comboComponent.isActive&&m.emit(s.COMBO_UPDATED,{streak:this.comboComponent.streak,multiplier:this.comboComponent.multiplier,level:this.comboComponent.comboLevel,levelText:this.comboComponent.getComboLevelText()}),m.emit(s.COMBO_MULTIPLIER_CHANGED,{multiplier:this.comboComponent.multiplier,streak:this.comboComponent.streak,isActive:this.comboComponent.isActive})}},n.onFruitMissed=function(o){o.score>0&&this.endCombo()},n.onDamageTaken=function(o){this.endCombo()},n.endCombo=function(){this.comboComponent.isActive&&m.emit(s.COMBO_ENDED,{finalStreak:this.comboComponent.streak,finalMultiplier:this.comboComponent.multiplier,totalCombos:this.comboComponent.totalCombos,maxStreak:this.comboComponent.maxStreak}),this.comboComponent.resetCombo(),m.emit(s.COMBO_MULTIPLIER_CHANGED,{multiplier:this.comboComponent.multiplier,streak:this.comboComponent.streak,isActive:this.comboComponent.isActive})},n.onGameOver=function(o){},n.onGameRestarted=function(o){this.comboComponent.resetCombo(),this.comboComponent.totalCombos=0,this.comboComponent.maxStreak=0},n.getCurrentMultiplier=function(){return this.comboComponent.multiplier},n.getCurrentStreak=function(){return this.comboComponent.streak},n.getComboComponent=function(){return this.comboComponent},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/ComboUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts"],(function(t){var i,o,n,e,s,a,l,r,c,b,h,p,m,u,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,l=t.Label,r=t.Node,c=t.UIOpacity,b=t.Color,h=t.tween,p=t.Vec3,m=t.Component},function(t){u=t.EventBus},function(t){C=t.GameEvents}],execute:function(){var d,f,y,E,g,k,w,v,B,T,D;s._RF.push({},"5268eSCoVpFD6zptk5E9Vc1","ComboUIController",void 0);var L=a.ccclass,F=a.property;t("ComboUIController",(d=L("ComboUIController"),f=F(l),y=F(l),E=F(l),g=F(r),d((v=i((w=function(t){function i(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,n(i,"comboLabel",v,e(i)),n(i,"multiplierLabel",B,e(i)),n(i,"levelLabel",T,e(i)),n(i,"comboContainer",D,e(i)),i.isVisible=!1,i.isBlinking=!1,i.blinkTween=null,i.opacityComponent=null,i}o(i,t);var s=i.prototype;return s.onLoad=function(){u.on(C.COMBO_STARTED,this.onComboStarted.bind(this)),u.on(C.COMBO_UPDATED,this.onComboUpdated.bind(this)),u.on(C.COMBO_ENDED,this.onComboEnded.bind(this)),u.on(C.GAME_RESTARTED,this.onGameRestarted.bind(this)),u.on(C.COMBO_TIME_WARNING,this.onComboTimeWarning.bind(this)),this.comboContainer&&(this.opacityComponent=this.comboContainer.getComponent(c),this.opacityComponent||(this.opacityComponent=this.comboContainer.addComponent(c))),this.hideCombo()},s.onDestroy=function(){u.off(C.COMBO_STARTED,this.onComboStarted.bind(this)),u.off(C.COMBO_UPDATED,this.onComboUpdated.bind(this)),u.off(C.COMBO_ENDED,this.onComboEnded.bind(this)),u.off(C.GAME_RESTARTED,this.onGameRestarted.bind(this)),u.off(C.COMBO_TIME_WARNING,this.onComboTimeWarning.bind(this)),this.stopBlinking()},s.onComboStarted=function(t){this.showCombo(),this.updateDisplay(t),this.playStartAnimation()},s.onComboUpdated=function(t){this.updateDisplay(t),this.playUpdateAnimation(),this.isBlinking&&this.stopBlinking()},s.onComboEnded=function(t){this.stopBlinking(),this.playEndAnimation()},s.onComboTimeWarning=function(t){this.isBlinking||this.startBlinking(t.isUrgent)},s.onGameRestarted=function(t){this.stopBlinking(),this.hideCombo()},s.updateDisplay=function(t){this.comboLabel&&(this.comboLabel.string="Серия: "+t.streak),this.multiplierLabel&&(this.multiplierLabel.string="x"+t.multiplier.toFixed(1)),this.levelLabel&&t.levelText&&(this.levelLabel.string=t.levelText),this.updateColors(t.level)},s.updateColors=function(t){var i="#FFFFFF";switch(t){case 1:i="#90EE90";break;case 2:i="#FFD700";break;case 3:i="#FF6B35";break;case 4:i="#FF1493";break;case 5:i="#9370DB";break;default:i="#FF0000"}this.comboLabel&&(this.comboLabel.color=b.fromHEX(new b,i)),this.multiplierLabel&&(this.multiplierLabel.color=b.fromHEX(new b,i)),this.levelLabel&&(this.levelLabel.color=b.fromHEX(new b,i))},s.startBlinking=function(t){if(void 0===t&&(t=!1),!this.isBlinking&&this.comboContainer&&this.opacityComponent){this.isBlinking=!0;var i=t?.15:.25,o=t?.15:.1,n=t?100:150,e=h(this.comboContainer).to(i,{scale:new p(1+o,1+o,1)}).to(i,{scale:new p(1,1,1)}).union().repeatForever(),s=h(this.opacityComponent).to(i,{opacity:n}).to(i,{opacity:255}).union().repeatForever();e.start(),s.start(),this.blinkTween={scale:e,opacity:s}}},s.stopBlinking=function(){this.isBlinking&&(this.isBlinking=!1,this.blinkTween&&(this.blinkTween.scale&&this.blinkTween.scale.stop(),this.blinkTween.opacity&&this.blinkTween.opacity.stop(),this.blinkTween=null),this.comboContainer&&this.comboContainer.setScale(1,1,1),this.opacityComponent&&(this.opacityComponent.opacity=255))},s.showCombo=function(){!this.isVisible&&this.comboContainer&&(this.isVisible=!0,this.comboContainer.active=!0,this.comboContainer.setScale(0,0,1),this.opacityComponent&&(this.opacityComponent.opacity=255),h(this.comboContainer).to(.3,{scale:new p(1,1,1)}).start())},s.hideCombo=function(){var t=this;this.isVisible&&this.comboContainer&&(this.isVisible=!1,h(this.comboContainer).to(.2,{scale:new p(0,0,1)}).call((function(){t.comboContainer.active=!1})).start())},s.playStartAnimation=function(){this.comboContainer&&h(this.comboContainer).to(.1,{scale:new p(1.2,1.2,1)}).to(.1,{scale:new p(1,1,1)}).start()},s.playUpdateAnimation=function(){this.comboContainer&&h(this.comboContainer).to(.05,{scale:new p(1.1,1.1,1)}).to(.05,{scale:new p(1,1,1)}).start()},s.playEndAnimation=function(){var t=this;this.comboContainer&&this.opacityComponent&&(h(this.comboContainer).to(.2,{scale:new p(1.4,1.4,1)}).to(.4,{scale:new p(.6,.6,1)}).start(),h(this.opacityComponent).to(.2,{opacity:255}).to(.4,{opacity:0}).call((function(){t.scheduleOnce((function(){t.hideCombo()}),.1)})).start())},i}(m)).prototype,"comboLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(w.prototype,"multiplierLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(w.prototype,"levelLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(w.prototype,"comboContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=w))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/ECSWorld.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"67eba9kEs5Ar4dMrlW1aVG+","ECSWorld",void 0),t("ECSWorld",function(){function t(){this.entities=new Map,this.components=new Map,this.systems=[],this.nextEntityId=1}t.getInstance=function(){return t.instance||(t.instance=new t),t.instance};var n=t.prototype;return n.createEntity=function(){var t=this.nextEntityId++;return this.entities.set(t,new Set),t},n.destroyEntity=function(t){var e=this;this.entities.has(t)?(this.entities.get(t).forEach((function(n){var s;null==(s=e.components.get(n))||s.delete(t)})),this.entities.delete(t)):console.warn("Entity "+t+" already destroyed or doesn't exist")},n.addComponent=function(t,e){var n,s=e.constructor.name;this.components.has(s)||this.components.set(s,new Map),this.components.get(s).set(t,e),null==(n=this.entities.get(t))||n.add(s)},n.removeComponent=function(t,e){var n,s;null==(n=this.components.get(e))||n.delete(t),null==(s=this.entities.get(t))||s.delete(e)},n.getComponent=function(t,e){var n;return null==(n=this.components.get(e))?void 0:n.get(t)},n.hasComponent=function(t,e){var n;return(null==(n=this.entities.get(t))?void 0:n.has(e))||!1},n.getEntitiesWith=function(t){for(var n,s=[],i=function(){var e=n.value,i=e[0],o=e[1];t.every((function(t){return o.has(t)}))&&s.push(i)},o=e(this.entities);!(n=o()).done;)i();return s},n.addSystem=function(t){this.systems.push(t),t.onLoad()},n.removeSystem=function(t){var e=this.systems.indexOf(t);e>-1&&this.systems.splice(e,1)},n.update=function(t){this.systems.forEach((function(e){e.enabled&&e.update(t)}))},n.getEntityCount=function(){return this.entities.size},n.getComponentCount=function(t){var e;return(null==(e=this.components.get(t))?void 0:e.size)||0},n.clear=function(){this.entities.clear(),this.components.clear(),this.systems.forEach((function(t){return t.onDestroy()})),this.systems.length=0,this.nextEntityId=1},n.hasEntity=function(t){return this.entities.has(t)},t}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var e,n,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.BaseComponent}],execute:function(){n._RF.push({},"b5809E9IHBMWbcYFZRdpCfP","EffectComponent",void 0);t("EffectType",function(t){return t.SCREEN_SHAKE="screen_shake",t}({})),t("EffectComponent",function(t){function n(e,n,i){var s;return void 0===n&&(n=1),void 0===i&&(i=1),(s=t.call(this)||this).type=void 0,s.duration=void 0,s.elapsed=0,s.isActive=!0,s.intensity=1,s.parameters=new Map,s.type=e,s.duration=n,s.intensity=i,s}e(n,t);var i=n.prototype;return i.isComplete=function(){return this.elapsed>=this.duration},i.getProgress=function(){return Math.min(this.elapsed/this.duration,1)},i.getRemainingTime=function(){return Math.max(0,this.duration-this.elapsed)},i.setParameter=function(t,e){this.parameters.set(t,e)},i.getParameter=function(t){return this.parameters.get(t)},i.hasParameter=function(t){return this.parameters.has(t)},i.updateTime=function(t){this.isActive&&(this.elapsed+=t)},i.stop=function(){this.isActive=!1},i.reset=function(){this.elapsed=0,this.isActive=!0},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EffectComponent.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var e,n,o,i,s,c,f;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.BaseSystem},function(t){i=t.EffectType,s=t.EffectComponent},function(t){c=t.EventBus},function(t){f=t.GameEvents}],execute:function(){n._RF.push({},"677fcYVVZtOHZ9SiqOF6nBK","EffectSystem",void 0);t("EffectSystem",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onLoad=function(){c.on(f.DAMAGE_TAKEN,this.onDamageTaken.bind(this))},o.onDestroy=function(){c.off(f.DAMAGE_TAKEN,this.onDamageTaken.bind(this))},o.update=function(t){var e=this;this.world.getEntitiesWith(["EffectComponent"]).forEach((function(n){var o=e.world.getComponent(n,"EffectComponent");o&&o.isActive&&(o.updateTime(t),o.isComplete()?e.onEffectComplete(n,o):e.processEffect(n,o))}))},o.processEffect=function(t,e){var n=e.getProgress();switch(e.type){case i.SCREEN_SHAKE:this.applyScreenShake(t,e,n)}},o.applyScreenShake=function(t,e,n){var o=e.intensity*(1-n);c.emit(f.VISUAL_EFFECT_SCREEN_SHAKE,{entityId:"screen",intensity:o})},o.onEffectComplete=function(t,e){this.world.removeComponent(t,"EffectComponent")},o.onDamageTaken=function(t){t.entityId&&this.createDamageEffects(t.entityId,t.damage)},o.createDamageEffects=function(t,e){if(this.world.getComponent(t,"PositionComponent")){var n=this.world.createEntity(),o=new s(i.SCREEN_SHAKE,.5,50*e);this.world.addComponent(n,o)}},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/EffectViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts"],(function(e){var t,i,n,o,r,a,c,s,l,f,p,u,h,d,m,C,S,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,s=e.SpriteFrame,l=e.Vec3,f=e.ParticleSystem2D,p=e.Vec2,u=e.Color,h=e.Label,d=e.tween,m=e.UIOpacity,C=e.Component},function(e){S=e.EventBus},function(e){E=e.GameEvents}],execute:function(){var g,y,P,v,w,V,b,F,L;r._RF.push({},"97d7402wgVLd4XuR/7yphXt","EffectViewController",void 0);var _=a.ccclass,N=a.property;e("EffectViewController",(g=_("EffectViewController"),y=N(c),P=N(c),v=N(s),g((b=t((V=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"effectContainer",b,o(t)),n(t,"cameraNode",F,o(t)),n(t,"particleSprite",L,o(t)),t.originalCameraPosition=new l,t}i(t,e);var r=t.prototype;return r.onLoad=function(){S.on(E.VISUAL_EFFECT_SCREEN_SHAKE,this.onScreenShake.bind(this)),S.on(E.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),this.cameraNode&&(this.originalCameraPosition=this.cameraNode.position.clone())},r.onDestroy=function(){S.off(E.VISUAL_EFFECT_SCREEN_SHAKE,this.onScreenShake.bind(this)),S.off(E.FRUIT_COLLECTED,this.onFruitCollected.bind(this))},r.onFruitCollected=function(e){if(e.score>0){var t=e.position?e.position.x:0,i=e.position?e.position.y:-200;this.createHitEffect(t,i),this.createScorePopupDirect(e.score,t,i)}},r.createHitEffect=function(e,t){var i=this;if(this.effectContainer){[{angle:45,name:"TopRight"},{angle:135,name:"TopLeft"},{angle:225,name:"BottomLeft"},{angle:315,name:"BottomRight"}].forEach((function(n,o){i.scheduleOnce((function(){i.createCrossParticle(e,t,n.angle,n.name)}),.02*o)}))}},r.createCrossParticle=function(e,t,i,n){if(this.effectContainer){var o=new c("CrossParticle_"+n),r=o.addComponent(f);this.particleSprite&&(r.spriteFrame=this.particleSprite),r.totalParticles=3,r.duration=.15,r.emissionRate=20,r.life=.3,r.lifeVar=.1,r.startSize=8,r.startSizeVar=2,r.endSize=12,r.speed=80,r.speedVar=20,r.angle=i,r.angleVar=5,r.gravity=new p(0,0),r.startColor=new u(255,255,100,255),r.endColor=new u(255,150,0,0),o.setPosition(e,t),this.effectContainer.addChild(o),r.resetSystem(),this.scheduleOnce((function(){o.isValid&&o.removeFromParent()}),.5)}},r.onScreenShake=function(e){this.applyScreenShake(e)},r.createScorePopupDirect=function(e,t,i){if(this.effectContainer){var n=new c("ScorePopup"),o=n.addComponent(h);o.string="+"+e,o.fontSize=36,o.color=e>15?u.YELLOW:u.WHITE,n.setPosition(t,i+50),this.effectContainer.addChild(n),d(n).to(1.2,{position:new l(t,i+120,0)}).start();var r=n.addComponent(m);d(r).delay(.8).to(.4,{opacity:0}).call((function(){n.isValid&&n.removeFromParent()})).start()}},r.applyScreenShake=function(e){var t=this;if(this.cameraNode){var i=e.intensity||5,n=(Math.random()-.5)*i,o=(Math.random()-.5)*i;this.cameraNode.setPosition(this.originalCameraPosition.x+n,this.originalCameraPosition.y+o,this.originalCameraPosition.z),this.scheduleOnce((function(){t.cameraNode&&t.cameraNode.isValid&&t.cameraNode.setPosition(t.originalCameraPosition)}),.05)}},t}(C)).prototype,"effectContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(V.prototype,"cameraNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(V.prototype,"particleSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=V))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bf271bj0vtLpoYRend4RZZj","EventBus",void 0),e("EventBus",function(){function e(){this.events=new Map}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.emit=function(n,t){e.getInstance().emitEvent(n,t)},e.on=function(n,t){e.getInstance().addEventListener(n,t)},e.off=function(n,t){e.getInstance().removeEventListener(n,t)},e.clear=function(){e.getInstance().clearAll()};var n=e.prototype;return n.emitEvent=function(e,n){var t=this.events.get(e);t&&t.forEach((function(t){try{t(n)}catch(n){console.error("Error in event listener for "+e+":",n)}}))},n.addEventListener=function(e,n){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(n)},n.removeEventListener=function(e,n){var t=this.events.get(e);if(t){var s=t.indexOf(n);s>-1&&t.splice(s,1)}},n.clearAll=function(){this.events.clear()},e}()).instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/FallStrategyComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var e,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){a=t.BaseComponent}],execute:function(){r._RF.push({},"83edauWUzRKira6TOR+Y/if","FallStrategyComponent",void 0);var n=t("FallStrategyType",function(t){return t.STRAIGHT="straight",t.ZIGZAG="zigzag",t.ACCELERATED="accelerated",t}({}));t("FallStrategyComponent",function(t){function r(e){var r;return void 0===e&&(e=n.STRAIGHT),(r=t.call(this)||this).strategyType=void 0,r.parameters=void 0,r.strategyType=e,r.parameters=new Map,r}e(r,t);var a=r.prototype;return a.setParameter=function(t,e){this.parameters.set(t,e)},a.getParameter=function(t){return this.parameters.get(t)},a.hasParameter=function(t){return this.parameters.has(t)},r}(a));r._RF.pop()}}}));

System.register("chunks:///_virtual/FallStrategyFactory.ts",["cc","./StraightFallStrategy.ts","./ZigzagFallStrategy.ts","./AcceleratedFallStrategy.ts","./FallStrategyComponent.ts"],(function(t){var e,a,r,n,l;return{setters:[function(t){e=t.cclegacy},function(t){a=t.StraightFallStrategy},function(t){r=t.ZigzagFallStrategy},function(t){n=t.AcceleratedFallStrategy},function(t){l=t.FallStrategyType}],execute:function(){e._RF.push({},"3e7983RmIpO06T1sArgWlfm","FallStrategyFactory",void 0);t("FallStrategyFactory",function(){function t(){}return t.createStrategy=function(t){switch(t){case l.STRAIGHT:return new a;case l.ZIGZAG:return new r;case l.ACCELERATED:return new n;default:return console.warn("Unknown fall strategy type: "+t+". Using straight fall."),new a}},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FruitComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(e){var t,r,n;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy},function(e){n=e.BaseComponent}],execute:function(){r._RF.push({},"5215aM1HvFP27JkwB6edqtz","FruitComponent",void 0);var o=e("FruitType",function(e){return e.APPLE="apple",e.BANANA="banana",e.ORANGE="orange",e.MUSHROOM="mushroom",e}({}));e("FruitComponent",function(e){function r(t){var r;return(r=e.call(this)||this).type=void 0,r.score=void 0,r.type=t,r.score=r.getScoreForType(t),r}t(r,e);var n=r.prototype;return n.getScoreForType=function(e){switch(e){case o.APPLE:return 10;case o.BANANA:return 15;case o.ORANGE:return 20;case o.MUSHROOM:return-1;default:return 10}},n.isHazard=function(){return this.score<0},n.getDamage=function(){return this.isHazard()?Math.abs(this.score):0},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/FruitViewController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./FruitComponent.ts","./GameEvents.ts"],(function(t){var e,i,n,o,r,a,s,l,u,f,c,d,h,p,C,b,m,g,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Prefab,l=t.SpriteFrame,u=t.instantiate,f=t.Sprite,c=t.UITransform,d=t.UIOpacity,h=t.Color,p=t.tween,C=t.Vec3,b=t.Component},function(t){m=t.EventBus},function(t){g=t.FruitType},function(t){I=t.GameEvents}],execute:function(){var y,v,F,N,S,A,T,E,w,R,D,O,_;r._RF.push({},"1b674IDGz9MIZ37RMVyFale","FruitViewController",void 0);var P=a.ccclass,z=a.property;t("FruitViewController",(y=P("FruitViewController"),v=z(s),F=z(l),N=z(l),S=z(l),A=z(l),y((w=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"fruitPrefab",w,o(e)),n(e,"appleSprite",R,o(e)),n(e,"bananaSprite",D,o(e)),n(e,"orangeSprite",O,o(e)),n(e,"mushroomSprite",_,o(e)),e.fruitNodes=new Map,e}i(e,t);var r=e.prototype;return r.onLoad=function(){m.on(I.FRUIT_SPAWNED,this.onFruitSpawned.bind(this)),m.on(I.FRUIT_POSITION_CHANGED,this.onPositionChanged.bind(this)),m.on(I.FRUIT_ROTATION_CHANGED,this.onRotationChanged.bind(this)),m.on(I.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),m.on(I.HAZARD_COLLISION,this.onHazardCollision.bind(this)),m.on(I.ENTITY_DESTROYED,this.onEntityDestroyed.bind(this)),m.on(I.ANIMATION_CHANGED,this.onAnimationChanged.bind(this))},r.onDestroy=function(){m.off(I.FRUIT_SPAWNED,this.onFruitSpawned.bind(this)),m.off(I.FRUIT_POSITION_CHANGED,this.onPositionChanged.bind(this)),m.off(I.FRUIT_ROTATION_CHANGED,this.onRotationChanged.bind(this)),m.off(I.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),m.off(I.HAZARD_COLLISION,this.onHazardCollision.bind(this)),m.off(I.ENTITY_DESTROYED,this.onEntityDestroyed.bind(this)),m.off(I.ANIMATION_CHANGED,this.onAnimationChanged.bind(this))},r.onFruitSpawned=function(t){if(this.fruitPrefab){var e=u(this.fruitPrefab),i=e.getComponent(f),n=e.getComponent(c);if(i)if(n){var o=e.getComponent(d);o||(o=e.addComponent(d));var r=this.getSpriteForFruit(t.fruitType);r&&(i.spriteFrame=r),n.setContentSize(.2*r.width,.2*r.height),e.setPosition(t.x,t.y),this.node.addChild(e),this.fruitNodes.set(t.entityId,e)}else console.error("Fruit prefab must have UITransform component!");else console.error("Fruit prefab must have Sprite component!")}else console.error("Fruit prefab not assigned!")},r.onPositionChanged=function(t){var e=this.fruitNodes.get(t.entityId);e&&e.setPosition(t.x,t.y)},r.onRotationChanged=function(t){var e=this.fruitNodes.get(t.entityId);e&&e.setRotationFromEuler(0,0,-t.rotation)},r.onAnimationChanged=function(t){var e=this.fruitNodes.get(t.entityId);if(e){if(void 0!==t.scaleX&&void 0!==t.scaleY&&e.setScale(t.scaleX,t.scaleY),void 0!==t.alpha){var i=e.getComponent(d);i&&(i.opacity=Math.floor(255*t.alpha))}if(void 0!==t.colorR&&void 0!==t.colorG&&void 0!==t.colorB){var n=e.getComponent(f);if(n){var o=new h(Math.floor(255*t.colorR),Math.floor(255*t.colorG),Math.floor(255*t.colorB),n.color.a);n.color=o}}}},r.onFruitCollected=function(t){var e=this,i=this.fruitNodes.get(t.entityId);i&&(p(i).to(.1,{scale:new C(1.3,1.3,1)}).to(.25,{scale:new C(0,0,1)}).call((function(){i.parent&&i.removeFromParent(),e.fruitNodes.delete(t.entityId)})).start(),p(i).to(.35,{eulerAngles:new C(0,0,i.eulerAngles.z+180)}).start())},r.onHazardCollision=function(t){var e=this,i=this.fruitNodes.get(t.entityId);if(i){p(i).to(.1,{scale:new C(1.5,1.5,1)}).to(.2,{scale:new C(.3,.3,1)}).call((function(){i.parent&&i.removeFromParent(),e.fruitNodes.delete(t.entityId)})).start(),p(i).to(.3,{eulerAngles:new C(0,0,i.eulerAngles.z+360)}).start();var n=i.getComponent(f);if(n){var o=n.color.clone();n.color=new h(255,100,100,255),setTimeout((function(){n.isValid&&(n.color=o)}),100)}}},r.onEntityDestroyed=function(t){var e=this.fruitNodes.get(t.entityId);e&&(e.parent&&e.removeFromParent(),this.fruitNodes.delete(t.entityId))},r.getSpriteForFruit=function(t){switch(t){case g.APPLE:return this.appleSprite;case g.BANANA:return this.bananaSprite;case g.ORANGE:return this.orangeSprite;case g.MUSHROOM:return this.mushroomSprite;default:return null}},e}(b)).prototype,"fruitPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(E.prototype,"appleSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(E.prototype,"bananaSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(E.prototype,"orangeSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(E.prototype,"mushroomSprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameConstants.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"2c808jDGxdKpJ8pWbTsB1Ah","GameConstants",void 0);var I=E("GameConstants",(function(){}));I.SCREEN_WIDTH=1920,I.SCREEN_HEIGHT=1080,I.FRUIT_SIZE={width:100,height:100},I.BASKET_SIZE={width:100,height:50},I.FRUIT_FALL_SPEED=150,I.FRUIT_SPEED_VARIATION=50,I.BASKET_SPEED=300,I.FRUIT_ROTATION_SPEED_MIN=-180,I.FRUIT_ROTATION_SPEED_MAX=180,I.GAME_TIME=5,I.FRUIT_SPAWN_RATE=1.5,I.FRUIT_LIFETIME=30,I.BASKET_MAX_HEALTH=3,I.INVULNERABILITY_DURATION=1,I.ZIGZAG_AMPLITUDE=100,I.ZIGZAG_FREQUENCY=2,I.ACCELERATED_ACCELERATION=-100,I.ACCELERATED_MAX_VELOCITY=-1e3,I.BASKET_Y_POSITION=100,I.COMBO_MULTIPLIER_BASE=1,I.COMBO_MULTIPLIER_INCREMENT=.2,I.COMBO_MULTIPLIER_MAX=3,I.COMBO_TIMEOUT=10,I.COMBO_MIN_STREAK=3,I.COMBO_LEVELS=[3,5,10,15,20],I.SOUND_VOLUME_MASTER=1,I.SOUND_VOLUME_SFX=.8,I.SOUND_VOLUME_MUSIC=.6,_._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc"],(function(_){var e;return{setters:[function(_){e=_.cclegacy}],execute:function(){e._RF.push({},"b9f34P+2sZBMY3EqbxUV8kU","GameEvents",void 0);_("GameEvents",function(_){return _.GAME_STARTED="game_started",_.GAME_PAUSED="game_paused",_.GAME_RESUMED="game_resumed",_.GAME_OVER="game_over",_.GAME_RESTARTED="game_restarted",_.BASKET_POSITION_CHANGED="basket_position_changed",_.FRUIT_POSITION_CHANGED="fruit_position_changed",_.FRUIT_ROTATION_CHANGED="fruit_rotation_changed",_.POSITION_CHANGED="position_changed",_.ANIMATION_CHANGED="animation_changed",_.BASKET_CREATED="basket_created",_.FRUIT_SPAWNED="fruit_spawned",_.ENTITY_DESTROYED="entity_destroyed",_.FRUIT_COLLECTED="fruit_collected",_.FRUIT_MISSED="fruit_missed",_.HAZARD_COLLISION="hazard_collision",_.DAMAGE_TAKEN="damage_taken",_.HEALTH_RESTORED="health_restored",_.COMBO_STARTED="combo_started",_.COMBO_UPDATED="combo_updated",_.COMBO_ENDED="combo_ended",_.COMBO_MULTIPLIER_CHANGED="combo_multiplier_changed",_.COMBO_TIME_WARNING="combo_time_warning",_.SOUND_PLAY="sound_play",_.SOUND_STOP="sound_stop",_.SOUND_VOLUME_CHANGED="sound_volume_changed",_.MUSIC_PLAY="music_play",_.MUSIC_STOP="music_stop",_.SCORE_CHANGED="score_changed",_.TIMER_UPDATED="timer_updated",_.VISUAL_EFFECT_SCREEN_SHAKE="visual_effect_screen_shake",_}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ECSWorld.ts","./MovementSystem.ts","./InputSystem.ts","./CollisionSystem.ts","./SpawnSystem.ts","./ScoreSystem.ts","./LifetimeSystem.ts","./BoundarySystem.ts","./RotationSystem.ts","./HealthSystem.ts","./ComboSystem.ts","./AnimationSystem.ts","./EffectSystem.ts","./AudioSystem.ts","./PositionComponent.ts","./VelocityComponent.ts","./BoundsComponent.ts","./BasketComponent.ts","./HealthComponent.ts","./ServiceLocator.ts","./EventBus.ts","./GameConstants.ts","./GameEvents.ts"],(function(t){var e,s,n,i,o,r,a,m,c,S,h,d,u,y,l,E,f,g,p,C,A,T,W,G,v,_,w,B;return{setters:[function(t){e=t.inheritsLoose},function(t){s=t.cclegacy,n=t._decorator,i=t.view,o=t.Component},function(t){r=t.ECSWorld},function(t){a=t.MovementSystem},function(t){m=t.InputSystem},function(t){c=t.CollisionSystem},function(t){S=t.SpawnSystem},function(t){h=t.ScoreSystem},function(t){d=t.LifetimeSystem},function(t){u=t.BoundarySystem},function(t){y=t.RotationSystem},function(t){l=t.HealthSystem},function(t){E=t.ComboSystem},function(t){f=t.AnimationSystem},function(t){g=t.EffectSystem},function(t){p=t.AudioSystem},function(t){C=t.PositionComponent},function(t){A=t.VelocityComponent},function(t){T=t.BoundsComponent},function(t){W=t.BasketComponent},function(t){G=t.HealthComponent},function(t){v=t.ServiceLocator},function(t){_=t.EventBus},function(t){w=t.GameConstants},function(t){B=t.GameEvents}],execute:function(){var M;s._RF.push({},"9cbad8k67pMz4pRGOk40jp0","GameManager",void 0);var I=n.ccclass,P=t("GameState",function(t){return t.MENU="menu",t.PLAYING="playing",t.PAUSED="paused",t.GAME_OVER="game_over",t}({}));t("GameManager",I("GameManager")(M=function(t){function s(){for(var e,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).ecsWorld=void 0,e.scoreSystem=void 0,e.healthSystem=void 0,e.audioSystem=void 0,e.gameState=P.MENU,e.gameTime=w.GAME_TIME,e.currentTime=0,e}e(s,t);var n=s.prototype;return n.onLoad=function(){this.initializeECS(),this.registerServices(),this.createBasketEntity()},n.initializeECS=function(){this.ecsWorld=r.getInstance();var t=i.getVisibleSize();this.ecsWorld.addSystem(new a),this.ecsWorld.addSystem(new y),this.ecsWorld.addSystem(new m),this.ecsWorld.addSystem(new c);var e=new S;e.setScreenDimensions(t.width,t.height),this.ecsWorld.addSystem(e),this.scoreSystem=new h,this.ecsWorld.addSystem(this.scoreSystem),this.ecsWorld.addSystem(new d);var s=new u;s.setScreenDimensions(t.width,t.height),this.ecsWorld.addSystem(s),this.healthSystem=new l,this.ecsWorld.addSystem(this.healthSystem),this.ecsWorld.addSystem(new E),this.ecsWorld.addSystem(new f),this.ecsWorld.addSystem(new g),this.audioSystem=new p,this.ecsWorld.addSystem(this.audioSystem)},n.registerServices=function(){v.register("GameManager",this),v.register("ECSWorld",this.ecsWorld),v.register("ScoreSystem",this.scoreSystem),v.register("HealthSystem",this.healthSystem),v.register("AudioSystem",this.audioSystem)},n.createBasketEntity=function(){var t=i.getVisibleSize(),e=this.ecsWorld.createEntity();this.ecsWorld.addComponent(e,new C(t.width/2,w.BASKET_Y_POSITION)),this.ecsWorld.addComponent(e,new A(0,0)),this.ecsWorld.addComponent(e,new T(w.BASKET_SIZE.width,w.BASKET_SIZE.height)),this.ecsWorld.addComponent(e,new W(w.BASKET_SPEED,w.BASKET_SIZE.width)),this.ecsWorld.addComponent(e,new G(w.BASKET_MAX_HEALTH)),_.emit(B.BASKET_CREATED,{entityId:e,x:t.width/2,y:w.BASKET_Y_POSITION})},n.startGame=function(){this.gameState=P.PLAYING,this.currentTime=this.gameTime,_.emit(B.GAME_STARTED,{gameTime:this.gameTime})},n.restartGame=function(){this.clearFruits(),this.resetBasketPosition(),this.resetBasketHealth(),this.scoreSystem&&this.scoreSystem.resetScore(),this.startGame(),_.emit(B.GAME_RESTARTED)},n.clearFruits=function(){var t=this;this.ecsWorld.getEntitiesWith(["FruitComponent"]).forEach((function(e){t.ecsWorld.hasEntity(e)&&(_.emit(B.ENTITY_DESTROYED,{entityId:e}),t.ecsWorld.destroyEntity(e))}))},n.resetBasketPosition=function(){var t=this;this.ecsWorld.getEntitiesWith(["BasketComponent","PositionComponent"]).forEach((function(e){var s=t.ecsWorld.getComponent(e,"PositionComponent");s&&(s.x=0,s.y=w.BASKET_Y_POSITION)}))},n.resetBasketHealth=function(){var t=this;this.ecsWorld.getEntitiesWith(["BasketComponent","HealthComponent"]).forEach((function(e){var s=t.ecsWorld.getComponent(e,"HealthComponent");s&&(s.currentHealth=s.maxHealth)}))},n.pauseGame=function(){this.gameState===P.PLAYING&&(this.gameState=P.PAUSED,_.emit(B.GAME_PAUSED))},n.resumeGame=function(){this.gameState===P.PAUSED&&(this.gameState=P.PLAYING,_.emit(B.GAME_RESUMED))},n.endGame=function(){var t=this.scoreSystem?this.scoreSystem.getCurrentScore():0;_.emit(B.GAME_OVER,{finalScore:t}),this.gameState=P.GAME_OVER},n.update=function(t){this.gameState===P.PLAYING?(this.ecsWorld.update(t),this.updateGameTimer(t)):this.gameState===P.GAME_OVER&&this.audioSystem&&this.audioSystem.update(t)},n.updateGameTimer=function(t){this.currentTime-=t,_.emit(B.TIMER_UPDATED,{currentTime:this.currentTime,maxTime:this.gameTime}),this.currentTime<=0&&this.endGame()},n.getGameState=function(){return this.gameState},n.getCurrentTime=function(){return this.currentTime},n.getScore=function(){return this.scoreSystem?this.scoreSystem.getCurrentScore():0},n.isRunning=function(){return this.gameState===P.PLAYING},n.getECSWorld=function(){return this.ecsWorld},s}(o))||M);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./ServiceLocator.ts","./GameEvents.ts"],(function(t){var e,n,r,i,o,a,s,l,c,u,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Label,l=t.Button,c=t.Component},function(t){u=t.EventBus},function(t){f=t.ServiceLocator},function(t){h=t.GameEvents}],execute:function(){var v,p,m,d,y,B,G;o._RF.push({},"7f7adoVy8xBBo4cXlBT3JO6","GameOverUIController",void 0);var S=a.ccclass,O=a.property;t("GameOverUIController",(v=S("GameOverUIController"),p=O(s),m=O(l),v((B=e((y=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"finalScoreLabel",B,i(e)),r(e,"restartButton",G,i(e)),e.finalScore=0,e}n(e,t);var o=e.prototype;return o.onLoad=function(){u.on(h.GAME_OVER,this.onGameOver.bind(this)),this.hideGameOverPanel(),this.setupButtons()},o.onDestroy=function(){u.off(h.GAME_OVER,this.onGameOver.bind(this)),this.removeButtonListeners()},o.setupButtons=function(){this.restartButton&&this.restartButton.node.on(l.EventType.CLICK,this.onRestartClicked,this)},o.removeButtonListeners=function(){this.restartButton&&this.restartButton.node.off(l.EventType.CLICK,this.onRestartClicked,this)},o.onGameOver=function(t){this.finalScore=t.finalScore,this.showGameOverPanel(),this.updateFinalScoreDisplay()},o.showGameOverPanel=function(){this.node.active=!0},o.hideGameOverPanel=function(){this.node.active=!1},o.updateFinalScoreDisplay=function(){this.finalScoreLabel&&(this.finalScoreLabel.string=""+this.finalScore)},o.onRestartClicked=function(){var t=f.get("AudioSystem");t&&t.playButtonClick(),this.hideGameOverPanel();var e=f.get("GameManager");e&&e.restartGame()},o.getFinalScore=function(){return this.finalScore},e}(c)).prototype,"finalScoreLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(y.prototype,"restartButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/HealthComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameConstants.ts"],(function(t){var i,n,e,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BaseComponent},function(t){r=t.GameConstants}],execute:function(){n._RF.push({},"215caw2khxK/LhAAZ7n31D0","HealthComponent",void 0);t("HealthComponent",function(t){function n(i){var n;return void 0===i&&(i=r.BASKET_MAX_HEALTH),(n=t.call(this)||this).currentHealth=void 0,n.maxHealth=void 0,n.invulnerabilityTime=0,n.invulnerabilityDuration=r.INVULNERABILITY_DURATION,n.maxHealth=i,n.currentHealth=i,n}i(n,t);var e=n.prototype;return e.takeDamage=function(t){return!(this.invulnerabilityTime>0)&&(this.currentHealth-=t,this.currentHealth<0&&(this.currentHealth=0),this.invulnerabilityTime=this.invulnerabilityDuration,!0)},e.heal=function(t){this.currentHealth+=t,this.currentHealth>this.maxHealth&&(this.currentHealth=this.maxHealth)},e.isDead=function(){return this.currentHealth<=0},e.isInvulnerable=function(){return this.invulnerabilityTime>0},e.updateInvulnerability=function(t){this.invulnerabilityTime>0&&(this.invulnerabilityTime-=t,this.invulnerabilityTime<0&&(this.invulnerabilityTime=0))},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/HealthSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts","./ServiceLocator.ts"],(function(t){var e,n,a,r,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){a=t.BaseSystem},function(t){r=t.EventBus},function(t){i=t.GameEvents},function(t){o=t.ServiceLocator}],execute:function(){n._RF.push({},"33514wWDSRNYre1R6pzUaRB","HealthSystem",void 0);t("HealthSystem",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var a=n.prototype;return a.update=function(t){var e=this;this.world.getEntitiesWith(["HealthComponent"]).forEach((function(n){if(e.world.hasEntity(n)){var a=e.world.getComponent(n,"HealthComponent");a&&(a.updateInvulnerability(t),a.isDead()&&e.handleEntityDeath(n))}}))},a.handleEntityDeath=function(t){if(this.world.hasComponent(t,"BasketComponent")){var e=o.get("GameManager");e&&e.endGame&&e.endGame()}},a.damageEntity=function(t,e){if(!this.world.hasEntity(t))return!1;var n=this.world.getComponent(t,"HealthComponent");if(n&&n.takeDamage(e))return r.emit(i.DAMAGE_TAKEN,{entityId:t,damage:e,currentHealth:n.currentHealth,maxHealth:n.maxHealth}),!0;return!1},a.healEntity=function(t,e){if(!this.world.hasEntity(t))return!1;var n=this.world.getComponent(t,"HealthComponent");if(n){var a=n.currentHealth;if(n.heal(e),n.currentHealth>a)return r.emit(i.HEALTH_RESTORED,{entityId:t,amount:e,currentHealth:n.currentHealth,maxHealth:n.maxHealth}),!0}return!1},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/HealthUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts","./GameConstants.ts"],(function(t){var e,n,a,o,h,s,l,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,o=t.Label,h=t.Component},function(t){s=t.EventBus},function(t){l=t.GameEvents},function(t){i=t.GameConstants}],execute:function(){var r;n._RF.push({},"94e99unGtRM/bPnDDLF6wK/","HealthUIController",void 0);var u=a.ccclass;t("HealthUIController",u("HealthUIController")(r=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).healthLabel=null,e.currentHealth=i.BASKET_MAX_HEALTH,e.maxHealth=i.BASKET_MAX_HEALTH,e}e(n,t);var a=n.prototype;return a.onLoad=function(){this.healthLabel=this.node.getComponent(o),this.healthLabel?(this.updateHealthDisplay(),s.on(l.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),s.on(l.HEALTH_RESTORED,this.onHealthRestored.bind(this)),s.on(l.GAME_RESTARTED,this.onGameRestarted.bind(this))):console.error("HealthUIController: No Label component found!")},a.onDestroy=function(){s.off(l.DAMAGE_TAKEN,this.onDamageTaken.bind(this)),s.off(l.HEALTH_RESTORED,this.onHealthRestored.bind(this)),s.off(l.GAME_RESTARTED,this.onGameRestarted.bind(this))},a.onDamageTaken=function(t){var e=this;this.currentHealth=t.currentHealth,this.maxHealth=t.maxHealth,this.updateHealthDisplay(),this.node.setScale(1.2,1.2),setTimeout((function(){e.node.setScale(1,1)}),200)},a.onHealthRestored=function(t){this.currentHealth=t.currentHealth,this.maxHealth=t.maxHealth,this.updateHealthDisplay()},a.onGameRestarted=function(){this.currentHealth=i.BASKET_MAX_HEALTH,this.maxHealth=i.BASKET_MAX_HEALTH,this.updateHealthDisplay()},a.updateHealthDisplay=function(){if(this.healthLabel){var t="❤️".repeat(this.currentHealth)+"🖤".repeat(this.maxHealth-this.currentHealth);this.healthLabel.string=""+t}},n}(h))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/IFallStrategy.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"ee9caz8sUpBQatKgHYPmHqW","IFallStrategy",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/InputSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts"],(function(o){var t,n,e,s,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o.input,s=o.Input},function(o){i=o.BaseSystem}],execute:function(){n._RF.push({},"ed7ecWUsXxKnbwGom0cDZeD","InputSystem",void 0);o("InputSystem",function(o){function n(){for(var t,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(t=o.call.apply(o,[this].concat(e))||this).currentMouseX=0,t.isMousePressed=!1,t}t(n,o);var i=n.prototype;return i.onLoad=function(){e.on(s.EventType.MOUSE_MOVE,this.onMouseMove,this),e.on(s.EventType.MOUSE_DOWN,this.onMouseDown,this),e.on(s.EventType.MOUSE_UP,this.onMouseUp,this),e.on(s.EventType.TOUCH_START,this.onTouchStart,this),e.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),e.on(s.EventType.TOUCH_END,this.onTouchEnd,this),e.on(s.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onDestroy=function(){e.off(s.EventType.MOUSE_MOVE,this.onMouseMove,this),e.off(s.EventType.MOUSE_DOWN,this.onMouseDown,this),e.off(s.EventType.MOUSE_UP,this.onMouseUp,this),e.off(s.EventType.TOUCH_START,this.onTouchStart,this),e.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),e.off(s.EventType.TOUCH_END,this.onTouchEnd,this),e.off(s.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},i.onMouseMove=function(o){var t=o.getUILocation();this.currentMouseX=t.x},i.onMouseDown=function(o){this.isMousePressed=!0;var t=o.getUILocation();this.currentMouseX=t.x},i.onMouseUp=function(o){this.isMousePressed=!1},i.onTouchStart=function(o){this.isMousePressed=!0;var t=o.getUILocation();this.currentMouseX=t.x},i.onTouchMove=function(o){var t=o.getUILocation();this.currentMouseX=t.x},i.onTouchEnd=function(o){this.isMousePressed=!1},i.onTouchCancel=function(o){this.isMousePressed=!1},i.update=function(o){var t=this;this.world.getEntitiesWith(["BasketComponent","PositionComponent","VelocityComponent"]).forEach((function(o){var n=t.world.getComponent(o,"PositionComponent"),e=t.world.getComponent(o,"VelocityComponent");n&&e&&(n.x=t.currentMouseX,e.x=0)}))},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/LifetimeComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameConstants.ts"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.BaseComponent},function(t){o=t.GameConstants}],execute:function(){n._RF.push({},"27622zGE/RBJaIjiHibsB5C","LifetimeComponent",void 0);t("LifetimeComponent",function(t){function n(e){var n;return void 0===e&&(e=o.FRUIT_LIFETIME),(n=t.call(this)||this).maxAge=void 0,n.currentAge=0,n.maxAge=e,n}e(n,t);var i=n.prototype;return i.update=function(t){this.currentAge+=t},i.isExpired=function(){return this.currentAge>=this.maxAge},i.getProgress=function(){return this.currentAge/this.maxAge},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/LifetimeSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var e,n,i,o,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.BaseSystem},function(t){o=t.EventBus},function(t){s=t.GameEvents}],execute:function(){n._RF.push({},"62d3ffn4o5Md4Po7O+2uUWz","LifetimeSystem",void 0);t("LifetimeSystem",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.update=function(t){var e=this,n=this.world.getEntitiesWith(["LifetimeComponent"]),i=[];n.forEach((function(n){var o=e.world.getComponent(n,"LifetimeComponent");o&&(o.update(t),o.isExpired()&&i.push(n))})),i.forEach((function(t){e.world.hasEntity(t)&&(o.emit(s.ENTITY_DESTROYED,{entityId:t}),e.world.destroyEntity(t))}))},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BasketViewController.ts","./EffectViewController.ts","./FruitViewController.ts","./AudioController.ts","./ComboUIController.ts","./GameOverUIController.ts","./HealthUIController.ts","./ScoreUIController.ts","./TimerUIController.ts","./GameConstants.ts","./GameEvents.ts","./BaseComponent.ts","./BaseSystem.ts","./AnimationComponent.ts","./AudioComponent.ts","./BasketComponent.ts","./BoundsComponent.ts","./CollectibleComponent.ts","./ComboComponent.ts","./EffectComponent.ts","./FallStrategyComponent.ts","./FruitComponent.ts","./HealthComponent.ts","./LifetimeComponent.ts","./PositionComponent.ts","./RotationComponent.ts","./VelocityComponent.ts","./ECSWorld.ts","./AnimationSystem.ts","./AudioSystem.ts","./BoundarySystem.ts","./CollisionSystem.ts","./ComboSystem.ts","./EffectSystem.ts","./HealthSystem.ts","./InputSystem.ts","./LifetimeSystem.ts","./MovementSystem.ts","./RotationSystem.ts","./ScoreSystem.ts","./ScreenAwareSystem.ts","./SpawnSystem.ts","./EventBus.ts","./ServiceLocator.ts","./CollectibleFactory.ts","./GameManager.ts","./SceneSetup.ts","./AcceleratedFallStrategy.ts","./FallStrategyFactory.ts","./IFallStrategy.ts","./StraightFallStrategy.ts","./ZigzagFallStrategy.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MovementSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts","./FallStrategyFactory.ts"],(function(t){var e,n,o,a,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.BaseSystem},function(t){a=t.EventBus},function(t){r=t.GameEvents},function(t){s=t.FallStrategyFactory}],execute:function(){n._RF.push({},"ce59114oktAxqwXOy53VJpr","MovementSystem",void 0);t("MovementSystem",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.update=function(t){var e=this;this.world.getEntitiesWith(["PositionComponent","VelocityComponent"]).forEach((function(n){var o=e.world.getComponent(n,"PositionComponent"),s=e.world.getComponent(n,"VelocityComponent");if(o&&s){e.world.hasComponent(n,"FallStrategyComponent")&&e.applyFallStrategy(n,o,s,t),o.addPosition(s.x*t,s.y*t);var i=r.POSITION_CHANGED;e.world.hasComponent(n,"BasketComponent")?i=r.BASKET_POSITION_CHANGED:e.world.hasComponent(n,"FruitComponent")&&(i=r.FRUIT_POSITION_CHANGED),a.emit(i,{entityId:n,x:o.x,y:o.y})}}))},o.applyFallStrategy=function(t,e,n,o){var a=this.world.getComponent(t,"FallStrategyComponent");a&&s.createStrategy(a.strategyType).applyStrategy(n,e,o,a.parameters)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/PositionComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(o){var t,n,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy},function(o){i=o.BaseComponent}],execute:function(){n._RF.push({},"6caf8jxbShLQ6rzTXW3me4R","PositionComponent",void 0);o("PositionComponent",function(o){function n(t,n){var i;return void 0===t&&(t=0),void 0===n&&(n=0),(i=o.call(this)||this).x=0,i.y=0,i.x=t,i.y=n,i}t(n,o);var i=n.prototype;return i.setPosition=function(o,t){this.x=o,this.y=t},i.addPosition=function(o,t){this.x+=o,this.y+=t},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/RotationComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var o,n,i;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.BaseComponent}],execute:function(){n._RF.push({},"2d14bmtq0dJVZHYRfnlP+D3","RotationComponent",void 0);t("RotationComponent",function(t){function n(o){var n;return void 0===o&&(o=0),(n=t.call(this)||this).rotation=0,n.rotationSpeed=0,n.rotationSpeed=o,n}o(n,t);var i=n.prototype;return i.setRotationSpeed=function(t){this.rotationSpeed=t},i.addRotation=function(t){this.setRotation(this.rotation+t)},i.setRotation=function(t){this.rotation=t%360,this.rotation<0&&(this.rotation+=360)},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/RotationSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var n,o,e,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy},function(t){e=t.BaseSystem},function(t){i=t.EventBus},function(t){s=t.GameEvents}],execute:function(){o._RF.push({},"488d8Z9LkBMII4kLILbUTSy","RotationSystem",void 0);t("RotationSystem",function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.update=function(t){var n=this;this.world.getEntitiesWith(["RotationComponent"]).forEach((function(o){if(n.world.hasEntity(o)){var e=n.world.getComponent(o,"RotationComponent");if(e&&0!==e.rotationSpeed){var r=e.rotationSpeed*t;e.addRotation(r),n.world.hasComponent(o,"FruitComponent")&&i.emit(s.FRUIT_ROTATION_CHANGED,{entityId:o,rotation:e.rotation})}}}))},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/SceneSetup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./BasketViewController.ts","./FruitViewController.ts"],(function(e){var t,r,n,i,o,a,l,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Component},function(e){u=e.GameManager},function(e){c=e.BasketViewController},function(e){s=e.FruitViewController}],execute:function(){var p,f,g,m,b,C,h,S,y;o._RF.push({},"b38a3Civ05Hq7D2mLYSJ7lz","SceneSetup",void 0);var M=a.ccclass,v=a.property;e("SceneSetup",(p=M("SceneSetup"),f=v(u),g=v(c),m=v(s),p((h=t((C=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"gameManager",h,i(t)),n(t,"basketController",S,i(t)),n(t,"fruitController",y,i(t)),t}r(t,e);var o=t.prototype;return o.onLoad=function(){this.initializeScene()},o.initializeScene=function(){this.gameManager&&this.gameManager.startGame()},o.getGameManager=function(){return this.gameManager},o.getBasketController=function(){return this.basketController},o.getFruitController=function(){return this.fruitController},t}(l)).prototype,"gameManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(C.prototype,"basketController",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(C.prototype,"fruitController",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var e,r,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},function(t){n=t.BaseSystem},function(t){i=t.EventBus},function(t){o=t.GameEvents}],execute:function(){r._RF.push({},"6c092RW1hRCwq2uzQ8oWOS3","ScoreSystem",void 0);t("ScoreSystem",function(t){function r(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).currentScore=0,e.currentMultiplier=1,e}e(r,t);var n=r.prototype;return n.onLoad=function(){i.on(o.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),i.on(o.COMBO_MULTIPLIER_CHANGED,this.onMultiplierChanged.bind(this))},n.onDestroy=function(){i.off(o.FRUIT_COLLECTED,this.onFruitCollected.bind(this)),i.off(o.COMBO_MULTIPLIER_CHANGED,this.onMultiplierChanged.bind(this))},n.onFruitCollected=function(t){var e=t.score,r=e>0?Math.floor(e*this.currentMultiplier):e;this.currentScore+=r,i.emit(o.SCORE_CHANGED,{score:this.currentScore,addedScore:r,baseScore:e,multiplier:this.currentMultiplier})},n.onMultiplierChanged=function(t){this.currentMultiplier=t.multiplier},n.update=function(t){},n.getCurrentScore=function(){return this.currentScore},n.resetScore=function(){this.currentScore=0,this.currentMultiplier=1,i.emit(o.SCORE_CHANGED,{score:this.currentScore,addedScore:0,baseScore:0,multiplier:this.currentMultiplier})},r}(n));r._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts"],(function(e){var r,t,n,o,c,i,s;return{setters:[function(e){r=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,o=e.Label,c=e.Component},function(e){i=e.EventBus},function(e){s=e.GameEvents}],execute:function(){var u;t._RF.push({},"1d5eaXHucNGMroqR7WPrNMj","ScoreUIController",void 0);var a=n.ccclass;n.property,e("ScoreUIController",a("ScoreUIController")(u=function(e){function t(){for(var r,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(r=e.call.apply(e,[this].concat(n))||this).currentScore=0,r}r(t,e);var n=t.prototype;return n.onLoad=function(){i.on(s.SCORE_CHANGED,this.onScoreChanged.bind(this)),this.updateScoreDisplay()},n.onDestroy=function(){i.off(s.SCORE_CHANGED,this.onScoreChanged.bind(this))},n.onScoreChanged=function(e){this.currentScore=e.score,this.updateScoreDisplay()},n.updateScoreDisplay=function(){var e=this.node.getComponent(o);e&&(e.string="Счёт: "+this.currentScore)},n.getCurrentScore=function(){return this.currentScore},t}(c))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/ScreenAwareSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSystem.ts","./GameConstants.ts"],(function(e){var t,n,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.BaseSystem},function(e){s=e.GameConstants}],execute:function(){n._RF.push({},"050c3mr0flJioQ9f6b//EsF","ScreenAwareSystem",void 0);e("ScreenAwareSystem",function(e){function n(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this).screenWidth=s.SCREEN_WIDTH,t.screenHeight=s.SCREEN_HEIGHT,t}t(n,e);var r=n.prototype;return r.setScreenDimensions=function(e,t){this.screenWidth=e,this.screenHeight=t},r.getScreenWidth=function(){return this.screenWidth},r.getScreenHeight=function(){return this.screenHeight},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/ServiceLocator.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"e0b65jdvShBhJAs2vctCDvu","ServiceLocator",void 0),e("ServiceLocator",function(){function e(){this.services=new Map}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.register=function(t,n){e.getInstance().registerService(t,n)},e.get=function(t){return e.getInstance().getService(t)},e.has=function(t){return e.getInstance().hasService(t)},e.unregister=function(t){e.getInstance().unregisterService(t)},e.clear=function(){e.getInstance().clearAll()};var t=e.prototype;return t.registerService=function(e,t){this.services.set(e,t)},t.getService=function(e){return this.services.get(e)},t.hasService=function(e){return this.services.has(e)},t.unregisterService=function(e){this.services.delete(e)},t.clearAll=function(){this.services.clear()},e}()).instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/SpawnSystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScreenAwareSystem.ts","./FruitComponent.ts","./CollectibleFactory.ts","./GameConstants.ts","./EventBus.ts","./GameEvents.ts"],(function(t){var e,n,s,i,a,r,o,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.ScreenAwareSystem},function(t){i=t.FruitType},function(t){a=t.CollectibleFactory},function(t){r=t.GameConstants},function(t){o=t.EventBus},function(t){c=t.GameEvents}],execute:function(){n._RF.push({},"fbbf9rEv4hGS7ZFNfjMh2Rd","SpawnSystem",void 0);t("SpawnSystem",function(t){function n(){for(var e,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))||this).spawnTimer=0,e.spawnRate=r.FRUIT_SPAWN_RATE,e}e(n,t);var s=n.prototype;return s.update=function(t){this.spawnTimer+=t,this.spawnTimer>=this.spawnRate&&(this.spawnItem(),this.spawnTimer=0)},s.spawnItem=function(){var t,e=Math.random()*(this.screenWidth-2*r.FRUIT_SIZE.width)+r.FRUIT_SIZE.width/2,n=this.screenHeight+2*r.FRUIT_SIZE.height;if(Math.random()<.25)t=i.MUSHROOM;else{var s=[i.APPLE,i.BANANA,i.ORANGE];t=s[Math.floor(Math.random()*s.length)]}var u=a.createFruit(this.world,t,e,n);o.emit(c.FRUIT_SPAWNED,{entityId:u,fruitType:t,isHazard:t===i.MUSHROOM,x:e,y:n})},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/StraightFallStrategy.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"84adeEJsutJrr8hCzZoI05Z","StraightFallStrategy",void 0);t("StraightFallStrategy",function(){function t(t){void 0===t&&(t=150),this.baseSpeed=void 0,this.baseSpeed=t}var e=t.prototype;return e.applyStrategy=function(t,e,i,a){if(!a.has("initialized")){a.set("initialized",!0);var r=40*(Math.random()-.5);a.set("horizontalDrift",r);var n=1+.2*(Math.random()-.5);a.set("speedMultiplier",n)}var s=a.get("horizontalDrift"),o=a.get("speedMultiplier");t.y=-this.baseSpeed*o,t.x=s},e.updateVelocity=function(t,e,i,a){e.setVelocity(0,-this.baseSpeed)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/TimerUIController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameEvents.ts"],(function(t){var e,i,n,r,o,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,r=t.Label,o=t.Component},function(t){s=t.EventBus},function(t){a=t.GameEvents}],execute:function(){var m;i._RF.push({},"7929e8sMjhD9bvylvc1R+3c","TimerUIController",void 0);var u=n.ccclass;n.property,t("TimerUIController",u("TimerUIController")(m=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this).currentTime=0,e.maxTime=60,e}e(i,t);var n=i.prototype;return n.onLoad=function(){s.on(a.TIMER_UPDATED,this.onTimerUpdated.bind(this)),s.on(a.GAME_STARTED,this.onGameStarted.bind(this)),this.updateTimerDisplay()},n.onDestroy=function(){s.off(a.TIMER_UPDATED,this.onTimerUpdated.bind(this)),s.off(a.GAME_STARTED,this.onGameStarted.bind(this))},n.onGameStarted=function(t){this.maxTime=t.gameTime,this.currentTime=t.gameTime,this.updateTimerDisplay()},n.onTimerUpdated=function(t){this.currentTime=t.currentTime,this.maxTime=t.maxTime,this.updateTimerDisplay()},n.updateTimerDisplay=function(){var t=this.node.getComponent(r);if(t){var e=Math.floor((this.currentTime+1)/60),i=Math.floor((this.currentTime+1)%60),n=e<10?"0"+e:e.toString(),o=i<10?"0"+i:i.toString();t.string=n+":"+o}},n.getCurrentTime=function(){return this.currentTime},n.getProgress=function(){return this.maxTime>0?this.currentTime/this.maxTime:0},i}(o))||m);i._RF.pop()}}}));

System.register("chunks:///_virtual/VelocityComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(t){var o,n,e;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BaseComponent}],execute:function(){n._RF.push({},"34c0ewaDAxKaIL46u3BTgwP","VelocityComponent",void 0);t("VelocityComponent",function(t){function n(o,n){var e;return void 0===o&&(o=0),void 0===n&&(n=0),(e=t.call(this)||this).x=0,e.y=0,e.x=o,e.y=n,e}o(n,t);var e=n.prototype;return e.setVelocity=function(t,o){this.x=t,this.y=o},e.addVelocity=function(t,o){this.x+=t,this.y+=o},e.multiplyVelocity=function(t){this.x*=t,this.y*=t},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/ZigzagFallStrategy.ts",["cc","./GameConstants.ts"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.GameConstants}],execute:function(){e._RF.push({},"5b392zLFjlLe77T05/aqivm","ZigzagFallStrategy",void 0);t("ZigzagFallStrategy",function(){function t(){}return t.prototype.applyStrategy=function(t,e,n,r){if(!r.has("startTime")){r.set("startTime",Date.now());var i=a.ZIGZAG_AMPLITUDE*(.5+1*Math.random());r.set("amplitude",i);var s=a.ZIGZAG_FREQUENCY*(.5+1*Math.random());r.set("frequency",s)}var o=r.get("startTime"),u=r.get("amplitude"),c=r.get("frequency"),g=(Date.now()-o)/1e3,l=u*Math.sin(g*c*Math.PI);t.x=l},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});